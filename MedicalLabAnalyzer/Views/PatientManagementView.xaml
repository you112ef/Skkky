<UserControl x:Class="MedicalLabAnalyzer.Views.PatientManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d"
             FlowDirection="RightToLeft"
             FontFamily="Segoe UI, Arial"
             d:DesignHeight="800" d:DesignWidth="1200">

    <UserControl.Resources>
        <!-- Patient Management Styles -->
        <Style x:Key="PatientCardStyle" TargetType="materialDesign:Card">
            <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp2"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4"/>
                    <Setter Property="Background" Value="#F8F9FA"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SearchBoxStyle" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
            <Setter Property="materialDesign:HintAssist.Hint" Value="البحث عن المرضى..."/>
            <Setter Property="materialDesign:HintAssist.IsFloating" Value="True"/>
            <Setter Property="materialDesign:TextFieldAssist.HasLeadingIcon" Value="True"/>
            <Setter Property="materialDesign:TextFieldAssist.LeadingIcon" Value="Magnify"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="4,2"/>
        </Style>

        <Style x:Key="PatientInfoStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>

        <Style x:Key="PatientNameStyle" TargetType="TextBlock" BasedOn="{StaticResource PatientInfoStyle}">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#1976D2"/>
        </Style>

        <!-- Data Templates -->
        <DataTemplate x:Key="PatientListItemTemplate">
            <materialDesign:Card Style="{StaticResource PatientCardStyle}" 
                               Cursor="Hand"
                               MouseLeftButtonUp="OnPatientCardClick"
                               Tag="{Binding PatientId}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>  <!-- Photo -->
                        <ColumnDefinition Width="*"/>     <!-- Info -->
                        <ColumnDefinition Width="Auto"/>  <!-- Actions -->
                    </Grid.ColumnDefinitions>

                    <!-- Patient Photo -->
                    <Border Grid.Column="0" 
                          Width="60" Height="60" 
                          CornerRadius="30" 
                          Background="#E0E0E0"
                          Margin="0,0,16,0">
                        <Border.Clip>
                            <EllipseGeometry Center="30,30" RadiusX="30" RadiusY="30"/>
                        </Border.Clip>
                        <Image Source="{Binding PhotoPath}" 
                             Stretch="UniformToFill"
                             Width="60" Height="60"/>
                        <materialDesign:PackIcon Kind="Account" 
                                               Width="30" Height="30" 
                                               Foreground="#9E9E9E"
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Visibility="{Binding HasPhoto, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                    </Border>

                    <!-- Patient Information -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding FullName}" Style="{StaticResource PatientNameStyle}"/>
                        
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Identifier" 
                                                   Width="14" Height="14" 
                                                   Foreground="#666666"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,4,0"/>
                            <TextBlock Text="{Binding PatientId}" 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#666666"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Calendar" 
                                                   Width="14" Height="14" 
                                                   Foreground="#666666"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,4,0"/>
                            <TextBlock Text="{Binding Age, StringFormat='{0} سنة'}" 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#666666"/>
                            <TextBlock Text=" • " 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#666666"
                                     Margin="4,0"/>
                            <TextBlock Text="{Binding Gender}" 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#666666"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Phone" 
                                                   Width="14" Height="14" 
                                                   Foreground="#666666"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,4,0"/>
                            <TextBlock Text="{Binding PhoneNumber}" 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#666666"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="TestTube" 
                                                   Width="14" Height="14" 
                                                   Foreground="#4CAF50"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,4,0"/>
                            <TextBlock Text="{Binding ExamsCount, StringFormat='{0} فحص'}" 
                                     Style="{StaticResource PatientInfoStyle}"
                                     Foreground="#4CAF50"
                                     FontWeight="SemiBold"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding DataContext.ViewPatientCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                              CommandParameter="{Binding}"
                              ToolTip="عرض الملف">
                            <materialDesign:PackIcon Kind="Eye" Width="18" Height="18"/>
                        </Button>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding DataContext.EditPatientCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                              CommandParameter="{Binding}"
                              ToolTip="تعديل">
                            <materialDesign:PackIcon Kind="Pencil" Width="18" Height="18"/>
                        </Button>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding DataContext.NewExamCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                              CommandParameter="{Binding}"
                              ToolTip="فحص جديد">
                            <materialDesign:PackIcon Kind="Plus" Width="18" Height="18" Foreground="#4CAF50"/>
                        </Button>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding DataContext.DeletePatientCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                              CommandParameter="{Binding}"
                              ToolTip="حذف">
                            <materialDesign:PackIcon Kind="Delete" Width="18" Height="18" Foreground="#F44336"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>
        </DataTemplate>
    </UserControl.Resources>

    <materialDesign:DialogHost Identifier="PatientDialogHost" CloseOnClickAway="True">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- Header & Search -->
                <RowDefinition Height="*"/>     <!-- Content -->
                <RowDefinition Height="Auto"/>  <!-- Pagination -->
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <materialDesign:Card Grid.Row="0" 
                               materialDesign:ElevationAssist.Elevation="Dp4" 
                               Margin="8" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Title and Statistics -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="AccountGroup" 
                                               Width="32" Height="32" 
                                               Foreground="#1976D2"
                                               VerticalAlignment="Center"
                                               Margin="0,0,12,0"/>
                        <StackPanel>
                            <TextBlock Text="إدارة المرضى" 
                                     FontSize="20" 
                                     FontWeight="Bold"
                                     Foreground="#1976D2"/>
                            <TextBlock Text="{Binding TotalPatientsText}" 
                                     FontSize="12"
                                     Foreground="#666666"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Search and Filters -->
                    <StackPanel Grid.Column="1" 
                              Orientation="Horizontal" 
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="32,0">
                        
                        <!-- Search Box -->
                        <TextBox Name="SearchTextBox"
                               Style="{StaticResource SearchBoxStyle}"
                               Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                               Width="300"
                               Margin="0,0,16,0"/>

                        <!-- Filter ComboBox -->
                        <ComboBox materialDesign:HintAssist.Hint="تصنيف"
                                SelectedValue="{Binding SelectedFilter}"
                                Width="120"
                                Style="{StaticResource MaterialDesignOutlinedComboBox}">
                            <ComboBoxItem Content="الكل"/>
                            <ComboBoxItem Content="ذكور"/>
                            <ComboBoxItem Content="إناث"/>
                            <ComboBoxItem Content="لهم فحوصات"/>
                            <ComboBoxItem Content="بدون فحوصات"/>
                        </ComboBox>

                        <!-- Sort ComboBox -->
                        <ComboBox materialDesign:HintAssist.Hint="ترتيب"
                                SelectedValue="{Binding SelectedSort}"
                                Width="120"
                                Margin="8,0,0,0"
                                Style="{StaticResource MaterialDesignOutlinedComboBox}">
                            <ComboBoxItem Content="الاسم"/>
                            <ComboBoxItem Content="التاريخ"/>
                            <ComboBoxItem Content="العمر"/>
                            <ComboBoxItem Content="عدد الفحوصات"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center">
                        <Button Content="مريض جديد"
                              Style="{StaticResource ActionButtonStyle}"
                              Background="#4CAF50"
                              BorderBrush="#4CAF50"
                              Command="{Binding NewPatientCommand}">
                            <Button.ToolTip>
                                <ToolTip Content="إضافة مريض جديد للنظام"/>
                            </Button.ToolTip>
                        </Button>

                        <Button Content="استيراد"
                              Style="{StaticResource ActionButtonStyle}"
                              Background="#2196F3"
                              BorderBrush="#2196F3"
                              Command="{Binding ImportPatientsCommand}">
                            <Button.ToolTip>
                                <ToolTip Content="استيراد قائمة مرضى من Excel"/>
                            </Button.ToolTip>
                        </Button>

                        <Button Content="تصدير"
                              Style="{StaticResource ActionButtonStyle}"
                              Background="#FF9800"
                              BorderBrush="#FF9800"
                              Command="{Binding ExportPatientsCommand}">
                            <Button.ToolTip>
                                <ToolTip Content="تصدير قائمة المرضى إلى Excel"/>
                            </Button.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>

            <!-- Content Area -->
            <Grid Grid.Row="1" Margin="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>     <!-- Patient List -->
                    <ColumnDefinition Width="300"/>   <!-- Patient Details -->
                </Grid.ColumnDefinitions>

                <!-- Patient List -->
                <materialDesign:Card Grid.Column="0" 
                                   materialDesign:ElevationAssist.Elevation="Dp2" 
                                   Margin="0,0,4,0">
                    <Grid>
                        <!-- Loading Overlay -->
                        <Grid Background="#80000000"
                            Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <StackPanel HorizontalAlignment="Center" 
                                      VerticalAlignment="Center">
                                <materialDesign:PackIcon Kind="Loading" 
                                                       Width="48" Height="48" 
                                                       Foreground="White"
                                                       HorizontalAlignment="Center">
                                    <materialDesign:PackIcon.RenderTransform>
                                        <RotateTransform/>
                                    </materialDesign:PackIcon.RenderTransform>
                                    <materialDesign:PackIcon.Triggers>
                                        <EventTrigger RoutedEvent="Loaded">
                                            <BeginStoryboard>
                                                <Storyboard RepeatBehavior="Forever">
                                                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                                                   From="0" To="360" Duration="0:0:1"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </materialDesign:PackIcon.Triggers>
                                </materialDesign:PackIcon>
                                
                                <TextBlock Text="جاري تحميل المرضى..." 
                                         Foreground="White" 
                                         FontSize="16" 
                                         HorizontalAlignment="Center"
                                         Margin="0,16,0,0"/>
                            </StackPanel>
                        </Grid>

                        <!-- Patient List View -->
                        <ScrollViewer VerticalScrollBarVisibility="Auto" 
                                    HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding FilteredPatients}"
                                        ItemTemplate="{StaticResource PatientListItemTemplate}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Margin="8"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>

                        <!-- Empty State -->
                        <StackPanel HorizontalAlignment="Center" 
                                  VerticalAlignment="Center"
                                  Visibility="{Binding HasNoPatients, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <materialDesign:PackIcon Kind="AccountOff" 
                                                   Width="64" Height="64" 
                                                   Foreground="#E0E0E0"
                                                   HorizontalAlignment="Center"/>
                            <TextBlock Text="لا توجد مرضى" 
                                     FontSize="18"
                                     Foreground="#999999"
                                     HorizontalAlignment="Center"
                                     Margin="0,16,0,8"/>
                            <TextBlock Text="ابدأ بإضافة مريض جديد" 
                                     FontSize="14"
                                     Foreground="#BDBDBD"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>

                <!-- Patient Details Panel -->
                <materialDesign:Card Grid.Column="1" 
                                   materialDesign:ElevationAssist.Elevation="Dp2" 
                                   Margin="4,0,0,0"
                                   Visibility="{Binding HasSelectedPatient, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="16">
                            <TextBlock Text="تفاصيل المريض" 
                                     FontSize="18" 
                                     FontWeight="SemiBold"
                                     Foreground="#1976D2"
                                     Margin="0,0,0,16"/>

                            <!-- Patient Photo Large -->
                            <Border Width="120" Height="120" 
                                  CornerRadius="60" 
                                  Background="#E0E0E0"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,16">
                                <Border.Clip>
                                    <EllipseGeometry Center="60,60" RadiusX="60" RadiusY="60"/>
                                </Border.Clip>
                                <Image Source="{Binding SelectedPatient.PhotoPath}" 
                                     Stretch="UniformToFill"
                                     Width="120" Height="120"/>
                                <materialDesign:PackIcon Kind="Account" 
                                                       Width="60" Height="60" 
                                                       Foreground="#9E9E9E"
                                                       HorizontalAlignment="Center" 
                                                       VerticalAlignment="Center"
                                                       Visibility="{Binding SelectedPatient.HasPhoto, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                            </Border>

                            <!-- Patient Information -->
                            <StackPanel>
                                <!-- Name -->
                                <TextBlock Text="{Binding SelectedPatient.FullName}" 
                                         FontSize="20" 
                                         FontWeight="Bold"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,16"/>

                                <!-- Basic Info -->
                                <UniformGrid Columns="2" Margin="0,0,0,16">
                                    <StackPanel Margin="0,0,8,0">
                                        <TextBlock Text="رقم الهوية" 
                                                 FontSize="12" 
                                                 Foreground="#666666"/>
                                        <TextBlock Text="{Binding SelectedPatient.PatientId}" 
                                                 FontSize="14" 
                                                 FontWeight="SemiBold"/>
                                    </StackPanel>

                                    <StackPanel Margin="8,0,0,0">
                                        <TextBlock Text="العمر" 
                                                 FontSize="12" 
                                                 Foreground="#666666"/>
                                        <TextBlock Text="{Binding SelectedPatient.Age, StringFormat='{0} سنة'}" 
                                                 FontSize="14" 
                                                 FontWeight="SemiBold"/>
                                    </StackPanel>
                                </UniformGrid>

                                <!-- Contact Info -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="رقم الهاتف" 
                                             FontSize="12" 
                                             Foreground="#666666"/>
                                    <TextBlock Text="{Binding SelectedPatient.PhoneNumber}" 
                                             FontSize="14" 
                                             FontWeight="SemiBold"/>
                                </StackPanel>

                                <!-- Medical History -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock Text="التاريخ الطبي" 
                                             FontSize="14" 
                                             FontWeight="SemiBold"
                                             Foreground="#1976D2"
                                             Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding SelectedPatient.MedicalHistory}" 
                                             FontSize="12" 
                                             TextWrapping="Wrap"
                                             Foreground="#666666"/>
                                </StackPanel>

                                <!-- Recent Exams -->
                                <StackPanel>
                                    <TextBlock Text="آخر الفحوصات" 
                                             FontSize="14" 
                                             FontWeight="SemiBold"
                                             Foreground="#1976D2"
                                             Margin="0,0,0,8"/>
                                    
                                    <ItemsControl ItemsSource="{Binding SelectedPatient.RecentExams}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#F8F9FA" 
                                                      CornerRadius="4" 
                                                      Padding="8" 
                                                      Margin="0,2">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Grid.Column="0">
                                                            <TextBlock Text="{Binding ExamType}" 
                                                                     FontSize="12" 
                                                                     FontWeight="SemiBold"/>
                                                            <TextBlock Text="{Binding ExamDate, StringFormat='{0:dd/MM/yyyy}'}" 
                                                                     FontSize="11" 
                                                                     Foreground="#666666"/>
                                                        </StackPanel>

                                                        <materialDesign:Chip Grid.Column="1" 
                                                                           Content="{Binding Status}"
                                                                           Background="{Binding StatusColor}"
                                                                           Foreground="White"
                                                                           FontSize="10"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>

                                <!-- Action Buttons -->
                                <UniformGrid Columns="1" Margin="0,16,0,0">
                                    <Button Content="عرض جميع الفحوصات"
                                          Style="{StaticResource MaterialDesignRaisedButton}"
                                          Background="#2196F3"
                                          BorderBrush="#2196F3"
                                          Command="{Binding ViewAllExamsCommand}"
                                          Margin="0,4"/>
                                    
                                    <Button Content="فحص جديد"
                                          Style="{StaticResource MaterialDesignRaisedButton}"
                                          Background="#4CAF50"
                                          BorderBrush="#4CAF50"
                                          Command="{Binding NewExamForSelectedCommand}"
                                          Margin="0,4"/>
                                    
                                    <Button Content="تعديل المعلومات"
                                          Style="{StaticResource MaterialDesignOutlinedButton}"
                                          Command="{Binding EditSelectedPatientCommand}"
                                          Margin="0,4"/>
                                </UniformGrid>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </materialDesign:Card>
            </Grid>

            <!-- Pagination -->
            <materialDesign:Card Grid.Row="2" 
                               materialDesign:ElevationAssist.Elevation="Dp1" 
                               Margin="8" 
                               Padding="16,8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Page Info -->
                    <TextBlock Grid.Column="0" 
                             Text="{Binding PaginationInfo}" 
                             VerticalAlignment="Center"
                             FontSize="12"
                             Foreground="#666666"/>

                    <!-- Page Controls -->
                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              HorizontalAlignment="Right"
                              VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding FirstPageCommand}"
                              IsEnabled="{Binding CanGoToFirstPage}"
                              ToolTip="الصفحة الأولى">
                            <materialDesign:PackIcon Kind="PageFirst"/>
                        </Button>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding PreviousPageCommand}"
                              IsEnabled="{Binding CanGoToPreviousPage}"
                              ToolTip="السابق">
                            <materialDesign:PackIcon Kind="ChevronRight"/>
                        </Button>

                        <TextBox Text="{Binding CurrentPage, Mode=TwoWay}"
                               Width="50"
                               TextAlignment="Center"
                               materialDesign:HintAssist.Hint="صفحة"
                               Style="{StaticResource MaterialDesignOutlinedTextBox}"
                               Margin="8,0"/>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding NextPageCommand}"
                              IsEnabled="{Binding CanGoToNextPage}"
                              ToolTip="التالي">
                            <materialDesign:PackIcon Kind="ChevronLeft"/>
                        </Button>

                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                              Command="{Binding LastPageCommand}"
                              IsEnabled="{Binding CanGoToLastPage}"
                              ToolTip="الصفحة الأخيرة">
                            <materialDesign:PackIcon Kind="PageLast"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>
        </Grid>
    </materialDesign:DialogHost>
</UserControl>